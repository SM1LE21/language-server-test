/* generated by template _lsp.features.completion.SymbolCollector*/

package de.monticore.lang.sdbasis._lsp.features.completion;

import de.monticore.lang.sdbasis.SDBasisMill;
import de.monticore.lang.sdbasis._visitor.SDBasisTraverser;
import de.monticore.lang.sdbasis._visitor.SDBasisVisitor2;
import de.monticore.lang.sdbasis._symboltable.ISDBasisScope;
import de.monticore.lang.sdbasis._symboltable.ISDBasisArtifactScope;
import de.monticore.symboltable.ISymbol;
import de.monticore.symboltable.IScope;
import de.monticore.lang.sdbasis._ast.ASTSDArtifact;

import java.util.Collections;
import java.util.function.Consumer;
import de.monticore.symbols.basicsymbols._symboltable.VariableSymbol;
import de.monticore.symbols.basicsymbols._symboltable.DiagramSymbol;
import de.monticore.symbols.basicsymbols._symboltable.TypeVarSymbol;
import de.monticore.symbols.basicsymbols._symboltable.FunctionSymbol;
import de.monticore.symbols.basicsymbols._symboltable.TypeSymbol;

import java.util.stream.Collectors;

public class SDBasisSymbolCollector implements
    de.monticore.lang.sdbasis._visitor.SDBasisVisitor2,
    de.monticore.types.mcbasictypes._visitor.MCBasicTypesVisitor2,
    de.monticore.mcbasics._visitor.MCBasicsVisitor2,
    de.monticore.symbols.basicsymbols._visitor.BasicSymbolsVisitor2,
    de.monticore.expressions.expressionsbasis._visitor.ExpressionsBasisVisitor2,
    de.monticore.literals.mcliteralsbasis._visitor.MCLiteralsBasisVisitor2,
    de.monticore.umlstereotype._visitor.UMLStereotypeVisitor2,
    de.monticore.literals.mccommonliterals._visitor.MCCommonLiteralsVisitor2
{
    protected SDBasisSymbolCollection symbolCollection = new SDBasisSymbolCollection();

    protected SDBasisTraverser traverser = SDBasisMill.traverser();

    protected SDBasisTraverser getTraverser() {
      return traverser;
    }

    public SDBasisSymbolCollection collectSymbolsFromSymbolTable(ASTSDArtifact ast, ISDBasisArtifactScope artifactScope)
    {
      getTraverser().add4SDBasis(this);
      getTraverser().add4MCBasicTypes(this);
      getTraverser().add4MCBasics(this);
      getTraverser().add4BasicSymbols(this);
      getTraverser().add4ExpressionsBasis(this);
      getTraverser().add4MCLiteralsBasis(this);
      getTraverser().add4UMLStereotype(this);
      getTraverser().add4MCCommonLiterals(this);

      artifactScope.accept(getTraverser());
      ast.accept(getTraverser());
      return this.symbolCollection;
    }

    @Override
    public void visit(VariableSymbol sym) {
      symbolCollection.addSymbol(sym);
    }

    @Override
    public void visit(DiagramSymbol sym) {
      symbolCollection.addSymbol(sym);
    }

    @Override
    public void visit(TypeVarSymbol sym) {
      symbolCollection.addSymbol(sym);
    }

    @Override
    public void visit(FunctionSymbol sym) {
      symbolCollection.addSymbol(sym);
    }

    @Override
    public void visit(TypeSymbol sym) {
      symbolCollection.addSymbol(sym);
    }

}
