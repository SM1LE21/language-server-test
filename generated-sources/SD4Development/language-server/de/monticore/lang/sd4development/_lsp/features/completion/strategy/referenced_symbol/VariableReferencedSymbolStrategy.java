/* generated by template _lsp.features.completion.strategy.referenced_symbol.ReferencedSymbolStrategy*/

package de.monticore.lang.sd4development._lsp.features.completion.strategy.referenced_symbol;

import de.monticore.symboltable.ISymbol;
import de.monticore.lang.sd4development._parser.SD4DevelopmentParserInfo;
import de.monticore.lang.sd4development._lsp.features.completion.strategy.SD4DevelopmentDefaultCompletionStrategy;

import de.mclsg.lsp.document_management.DocumentInformation;
import de.mclsg.lsp.features.completion.ExpectedToken;
import de.mclsg.lsp.features.completion.strategy.CompletionStrategy;
import java.util.stream.Collectors;
import java.util.List;

import de.mclsg.lsp.ISymbolUsageResolutionProvider;
import de.mclsg.lsp.document_management.DocumentManager;

import de.monticore.symbols.oosymbols._symboltable.FieldSymbol;
import de.monticore.symbols.oosymbols._symboltable.MethodSymbol;
import de.monticore.symbols.basicsymbols._symboltable.VariableSymbol;
import de.monticore.symbols.oosymbols._symboltable.OOTypeSymbol;
import de.monticore.symbols.basicsymbols._symboltable.DiagramSymbol;
import de.monticore.symbols.basicsymbols._symboltable.TypeVarSymbol;
import de.monticore.symbols.basicsymbols._symboltable.FunctionSymbol;
import de.monticore.symbols.basicsymbols._symboltable.TypeSymbol;

public class VariableReferencedSymbolStrategy extends SD4DevelopmentDefaultCompletionStrategy {
    public VariableReferencedSymbolStrategy(ISymbolUsageResolutionProvider symbolUsageResolutionProvider, DocumentManager documentManager){
        super(symbolUsageResolutionProvider, documentManager);
    }

    public List<? extends ISymbol> getSymbols(ExpectedToken token, DocumentInformation documentInformation){
        List<? extends ISymbol> res = super.getSymbols(token, documentInformation);
        return res.stream().filter(s -> s instanceof VariableSymbol).collect(Collectors.toList());
    }

    public boolean matches(ExpectedToken expectedToken){
        return expectedToken.isSymbol
                && SD4DevelopmentParserInfo.stateReferencesVariableSymbol(expectedToken.parserState);
    }

}